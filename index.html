<html>
  <head>
    <title>TEST D3</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet"/>

    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js" integrity="sha384-6khuMg9gaYr5AxOqhkVIODVIvm9ynTT5J4V1cfthmT+emCG6yVmEZsRHdxlotUnm" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/d3@5.16.0/dist/d3.min.js"></script>
    <script src="https://unpkg.com/jspdf@latest/dist/jspdf.min.js"></script>
    <!--<script src="https://cdn.rawgit.com/eligrey/canvas-toBlob.js/f1a01896135ab378aa5c0118eadd81da55e698d8/canvas-toBlob.js"></script>-->
	  <script src="https://cdn.rawgit.com/eligrey/FileSaver.js/e9d941381475b5df8b7d7691013401e171014e89/FileSaver.min.js"></script>
    <!--<script src="js/FileSaver.min.js"></script>-->
    <script src="js/benchmark.js"></script>


    <style>
      body {
        margin: 20px;
      }

      line {
        /*stroke: black;*/
        /*stroke-width: 1px;*/
        fill: none;
      }

      .tooltip {
        font: 12px sans-serif;
      }
    </style>
  </head>

  <body>
    <h2>D3 test</h2>
    <div style="display:flex;margin-bottom:1rem">
      <div style="border:1px solid #CCC;border-radius:4px;padding:4px 10px">
        <div>Ancestry</div>
        <div>
          <input type="checkbox" class="benchmark_ancestry_cb" checked id="grpName_1" value="Euro">
          <label class="mb-0" for="grpName_1"> Euro</label>
        </div>
        <div>
          <input type="checkbox" class="benchmark_ancestry_cb" checked id="grpName_2" value="AA">
          <label class="mb-0" for="grpName_3"> AA</label>
        </div>
        <div>
          <input type="checkbox" class="benchmark_ancestry_cb" checked id="grpName_3" value="SA">
          <label class="mb-0" for="grpName_2"> SA</label>
        </div>
      </div>
    </div>
    <div>
      <div style="border:2px solid #007C82;border-radius:4px;padding:2px;float:left">
        <svg id="pgs_chart"></svg>
      </div>
      <div style="clear:both">
    </div>
    <div class="mt-2" style="display:flex">
      <div class="btn btn-primary btn-sm mr-2" id="exportPDF">Export to PDF</div>
      <div class="btn btn-primary btn-sm" id="exportPNG">Export to PNG</div>
    </div>
    <script type="text/javascript">

      const pgs_data = [
          { pgs: 'PGS000055', grpName:'Euro', y: 0.32104382, eb: 0.293867188, et: 0.348220452 },
          { pgs: 'PGS000055', grpName:'AA', y: 0.184892118, eb: -0.089983334, et: 0.45976757 },
          { pgs: 'PGS000055', grpName:'SA', y: -0.105811523, eb: -0.46257336, et: 0.250950314 },
          { pgs: 'PGS000074', grpName:'Euro', y: 0.296599424, eb: 0.270089896, et: 0.323108952 },
          { pgs: 'PGS000074', grpName:'AA', y: -0.00856871, eb: -0.285986641, et: 0.268849221 },
          { pgs: 'PGS000074', grpName:'SA', y: 0.202909229, eb: -0.15867862, et: 0.564497078 },
          { pgs: 'PGS000146', grpName:'Euro', y: 0.26389975, eb: 0.236905544, et: 0.290893957 },
          { pgs: 'PGS000146', grpName:'AA', y: 0.055109248, eb: -0.221344814, et: 0.331563311 },
          { pgs: 'PGS000146', grpName:'SA', y: -0.04312567, eb: -0.396279707, et: 0.310028367 },
          { pgs: 'PGS000147', grpName:'Euro', y: 0.18110247, eb: 0.15386322, et: 0.20834172 },
          { pgs: 'PGS000147', grpName:'AA', y: 0.094618527, eb: -0.176487732, et: 0.365724786 },
          { pgs: 'PGS000147', grpName:'SA', y: 0.36462254, eb: 0.007658949, et: 0.721586142 },
          { pgs: 'PGS000148', grpName:'Euro', y: 0.276220866, eb: 0.249458753, et: 0.302982979 },
          { pgs: 'PGS000148', grpName:'AA', y: -0.030533223, eb: -0.393065502, et: 0.331999056 },              { pgs: 'PGS000148', grpName:'SA', y: 0.156825277, eb: -0.120120911, et: 0.433771465 }
      ];

      //var width = document.documentElement.clientWidth,
      //    height = document.documentElement.clientHeight;
      var width = 1000,
          height = 500;

      $( document ).ready(function() {

        var benchmark = new Benchmark(pgs_data,width,height);

        $(".benchmark_ancestry_cb").on("change",function() {
            benchmark.update_ancestry();
        });
      });
    </script>
  </body>
</html>
